_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{"4pdB":function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSG",(function(){return W}));var o=r("nKUr"),n=r("q1tI"),s=r("xm5f"),c=r("tSya"),a=r("cpVT"),i=r("vJKn"),p=r.n(i),d=r("rg98"),u=r("/MKj"),b=r("KYPV"),l=r("UGp+"),w=r("2rfL"),f=r("Aw+l"),m=r("Vtj2"),O=r("3izT"),j=r("4mzW"),g=r("3yXT"),h=r("W6d4"),x=r("Ll6x"),P=r("4Ki6"),N=r("oCM3"),y=r("CFwT"),_=r("vOnD"),v=r("P4iE"),E=r("O6Eg"),S=_.b.div.withConfig({displayName:"styles__ForgotPasswordContainer",componentId:"sc-1xmr1no-0"})(["",""],{display:"flex",flexDirection:"column",justifyContent:"center"}),T=_.b.h1.withConfig({displayName:"styles__Title",componentId:"sc-1xmr1no-1"})(["",""],{fontSize:"24px",fontWeight:"600","--tw-text-opacity":"1",color:"rgba(13, 2, 41, var(--tw-text-opacity))",textAlign:"center",marginBottom:"20px","@media (min-width: 600px)":{fontSize:"26px",marginBottom:"40px"}}),A=Object(_.b)(b.a).withConfig({displayName:"styles__Form",componentId:"sc-1xmr1no-2"})(["",""],{display:"grid",gap:"10px"}),C=Object(_.b)(v.a).withConfig({displayName:"styles__Button",componentId:"sc-1xmr1no-3"})(["",""],{width:"100%",marginTop:"35px"}),D=_.b.p.withConfig({displayName:"styles__Notification",componentId:"sc-1xmr1no-4"})(["",""],{fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px","--tw-text-opacity":"1",color:"rgba(13, 2, 41, var(--tw-text-opacity))",fontWeight:"500",textAlign:"center",marginTop:"20px","@media (min-width: 600px)":{marginTop:"40px"}}),H=Object(_.b)(E.a).withConfig({displayName:"styles__Register",componentId:"sc-1xmr1no-5"})(["",""],{fontSize:"14px","--tw-text-opacity":"1",color:"rgba(234, 78, 27, var(--tw-text-opacity))",fontWeight:"600"});_.b.div.withConfig({displayName:"styles__CaptchaWrapper",componentId:"sc-1xmr1no-6"})(["",""],{});function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=function(){var e=Object(s.c)(["authen","common"]).t,t=Object(u.b)(),r=Object(f.a)(),c=Object(n.useState)("PHONE_NUMBER"),a=c[0],i=c[1],_=Object(n.useState)(!1),v=_[0],E=_[1],R=Object(n.useState)(""),F=R[0],M=R[1],B=Object(w.a)().isAuth;Object(n.useEffect)((function(){B&&r(j.PATH.HOME)}),[]);var W=Object(u.c)((function(e){return e.actions})).actionSuccess;Object(n.useEffect)((function(){W&&(Object(y.b)({type:"success",title:e("forgot-password.change-password-success")}),t(Object(h.b)()),r(j.PATH.LOGIN))}),[W]);var G={PHONE_NUMBER:l.b({phoneNumber:l.c().required(e("forgot-password.require-phone-number")).matches(x.c,e("forgot-password.phone-number-not-valid"))}),OTP:l.b({otp:l.c().required()}),CHANGE_PASSWORD:l.b({newPassword:l.c().required(e("common:required")),reNewPassword:l.c().required(e("common:required"))})},q=function(e){var r=e.phoneNumber,o={phoneNumber:"+84".concat(r.slice(1,r.length))};t(Object(g.j)(o))},k=function(){var e=Object(d.a)(p.a.mark((function e(r){var o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!0);try{o={phoneNumber:r},t(Object(g.j)(o)),M(""),E(!1),i("OTP")}catch(n){console.error(n),E(!1),M(null===n||void 0===n?void 0:n.message)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(p.a.mark((function e(r){var o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!0);try{o={input:{otpCode:r.otp,phoneNumber:r.phoneNumber,permission:"CANDIDATE"}},t(Object(g.m)(o)),E(!1),i("CHANGE_PASSWORD")}catch(n){console.error(n),E(!1),M(n.message)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(o){if(E(!0),o.newPassword===o.reNewPassword){var n={input:{otpCode:o.otp,phoneNumber:o.phoneNumber,permission:"CANDIDATE",newPassword:o.newPassword}};t(Object(g.i)(n)),eventManager.addListener("resetPasswordSuccess",(function(){r(j.PATH.LOGIN)})),E(!1)}else E(!1),Object(y.b)({type:"error",title:e("forgot-password.same-password-required")})};return Object(o.jsxs)(S,{children:[Object(o.jsx)(b.b,{initialValues:{phoneNumber:"",otp:"",newPassword:"",reNewPassword:""},validationSchema:G[a],onSubmit:function(e){if("PHONE_NUMBER"===a){var t=e.phoneNumber,r="+84".concat(t.slice(1,t.length));k(r)}"OTP"===a&&U(e),"CHANGE_PASSWORD"===a&&z(e)},children:function(t){return"OTP"!==a?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(T,{children:e("forgot-password.form-title")}),Object(o.jsxs)(A,{children:["PHONE_NUMBER"===a&&Object(o.jsx)(O.a,I(I({label:e("forgot-password.phone-number"),placeholder:e("forgot-password.enter-phone-number"),onKeyPress:m.c},t.getFieldProps("phoneNumber")),t.getFieldMeta("phoneNumber"))),"CHANGE_PASSWORD"===a&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O.a,I(I({label:e("forgot-password.new-password"),placeholder:e("forgot-password.enter-new-password"),type:"password"},t.getFieldProps("newPassword")),t.getFieldMeta("newPassword"))),Object(o.jsx)(O.a,I(I({label:e("forgot-password.re-enter-password"),placeholder:e("forgot-password.re-enter-your-password"),type:"password"},t.getFieldProps("reNewPassword")),t.getFieldMeta("reNewPassword")))]}),Object(o.jsx)(C,{loading:v,type:"submit",primary:!0,children:e("forgot-password.confirm")}),F&&Object(o.jsx)(N.a,{text:F})]})]}):"OTP"===a?Object(o.jsx)(P.a,{title:e("forgot-password.form-title"),loading:v,formik:t,errorMessage:F,onResendOtp:q,onClose:function(){i("PHONE_NUMBER")}}):void 0}}),Object(o.jsxs)(D,{children:[e("forgot-password.dont-have-account"),Object(o.jsx)(H,{routeName:j.PATH.REGISTER,children:e("forgot-password.register-here")})]})]})},M=r("ab40"),B=r("rQmk"),W=!0;t.default=function(e){var t=Object(s.c)(["authen"]).t;return Object(o.jsxs)(n.Fragment,{children:[Object(o.jsx)(c.a,{title:t("forgot-password.page-title"),routeName:j.PATH.FORGOT_PASSWORD}),Object(o.jsx)(M.a,{children:Object(o.jsx)(B.a,{children:Object(o.jsx)(F,{})})})]})}},lPBm:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forgot-password",function(){return r("4pdB")}])}},[["lPBm",0,2,6,1,3,4,5,7,12,13,15]]]);
{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/data/source/tuyendungvn-user-frontend-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/data/source/tuyendungvn-user-frontend-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRedirect } from \"@common/hooks/useRedirect\";\nimport { formatParams, unShiftArray } from \"@common/functions\";\nimport { getAllCategoryLv2API } from \"@containers/Job/helper\";\nimport { PATH } from \"@routes\";\nimport { BoxOptionsContainer, ListBoxMenu, ListBoxItem } from \"./styles\";\nimport AutoComplete from \"@designs/AutoComplete\";\nimport { SVG } from \"@designs/SVG\";\nimport Select from \"./components/Select\";\nvar PATH_SELF = PATH.JOB;\n\nvar Filter = function Filter(props) {\n  var _useTranslation = useTranslation([\"job\"]),\n      t = _useTranslation.t;\n\n  var redirect = useRedirect();\n  var dispatch = useDispatch();\n  var fullQuery = useRouter().query || {};\n  var query = removeParams(fullQuery);\n  var _ref = fullQuery,\n      career = _ref.career,\n      level = _ref.level,\n      salary = _ref.salary,\n      type = _ref.type;\n  var queryCareer = formatParams(decodeURIComponent(career || \"\"));\n  var queryLevel = formatParams(decodeURIComponent(level || \"\"));\n  var querySalary = formatParams(decodeURIComponent(salary || \"\"));\n  var queryType = formatParams(decodeURIComponent(type || \"\"));\n\n  var _useSelector = useSelector(function (state) {\n    return state.job;\n  }),\n      allJobLevel = _useSelector.allJobLevel,\n      allLevelPrice = _useSelector.allLevelPrice,\n      allJobType = _useSelector.allJobType;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.category;\n  }),\n      _useSelector2$categor = _useSelector2.categoryLevel2,\n      _useSelector2$categor2 = _useSelector2$categor.results,\n      allCareer = _useSelector2$categor2 === void 0 ? [] : _useSelector2$categor2,\n      _useSelector2$categor3 = _useSelector2$categor.totalCount,\n      totalCount = _useSelector2$categor3 === void 0 ? 0 : _useSelector2$categor3;\n\n  var _useState = useState([]),\n      listCareer = _useState[0],\n      setListCareer = _useState[1];\n\n  var _useState2 = useState([]),\n      listJobLevel = _useState2[0],\n      setListJobLevel = _useState2[1];\n\n  var _useState3 = useState([]),\n      listLevelPrice = _useState3[0],\n      setListLevelPrice = _useState3[1];\n\n  var _useState4 = useState([]),\n      listJobType = _useState4[0],\n      setListJobType = _useState4[1];\n\n  var _useState5 = useState(),\n      careerSelected = _useState5[0],\n      setCareerSelected = _useState5[1];\n\n  var _useState6 = useState(),\n      jobLevelSelected = _useState6[0],\n      setJobLevelSelected = _useState6[1];\n\n  var _useState7 = useState(),\n      levelPriceSelected = _useState7[0],\n      setLevelPriceSelected = _useState7[1];\n\n  var _useState8 = useState(),\n      jobTypeSelected = _useState8[0],\n      setJobTypeSelected = _useState8[1];\n\n  var _useState9 = useState(0),\n      page = _useState9[0],\n      setPage = _useState9[1];\n\n  var _useState10 = useState([]),\n      careers = _useState10[0],\n      setCareers = _useState10[1];\n\n  useEffect(function () {\n    if (page !== 0) {\n      dispatch(getAllCategoryLv2API(page));\n    }\n  }, [page]);\n  useEffect(function () {\n    if ((allCareer === null || allCareer === void 0 ? void 0 : allCareer.length) > 0) {\n      if ((careers === null || careers === void 0 ? void 0 : careers.length) < totalCount) {\n        var newPage = page + 1;\n        setPage(newPage);\n        setCareers(function (state) {\n          return [].concat(_toConsumableArray(careers), _toConsumableArray(allCareer));\n        });\n      }\n    }\n  }, [allCareer]);\n  useEffect(function () {\n    addOptionToCareers();\n    addOptionToJobLevels();\n    addOptionToLevelPrices();\n    addOptionToJobTypes();\n  }, [careers, allJobLevel, allLevelPrice, allJobType]);\n  useEffect(function () {\n    setCareerInitial();\n    setLevelInitial();\n    setSalaryInitial();\n    setTypeInitial();\n  }, [listCareer, listJobLevel, listLevelPrice, listJobType, fullQuery]);\n\n  var handleSelectedCareer = function handleSelectedCareer(option) {\n    setCareerSelected(option);\n    redirect(PATH_SELF, fullQuery, _objectSpread(_objectSpread({}, query), {}, {\n      career: encodeURIComponent(option === null || option === void 0 ? void 0 : option.slug)\n    }));\n  };\n\n  var handleSelectedJobLevel = function handleSelectedJobLevel(option) {\n    setJobLevelSelected(option);\n    redirect(PATH_SELF, fullQuery, _objectSpread(_objectSpread({}, query), {}, {\n      level: encodeURIComponent(option === null || option === void 0 ? void 0 : option.slug)\n    }));\n  };\n\n  var handleSelectedLevelPrice = function handleSelectedLevelPrice(option) {\n    setLevelPriceSelected(option);\n    redirect(PATH_SELF, fullQuery, _objectSpread(_objectSpread({}, query), {}, {\n      salary: encodeURIComponent(option === null || option === void 0 ? void 0 : option.customSlug)\n    }));\n  };\n\n  var handleSelectedJobType = function handleSelectedJobType(option) {\n    setJobTypeSelected(option);\n    redirect(PATH_SELF, fullQuery, _objectSpread(_objectSpread({}, query), {}, {\n      type: encodeURIComponent(option === null || option === void 0 ? void 0 : option.slug)\n    }));\n  };\n\n  var setCareerInitial = function setCareerInitial() {\n    if (queryCareer) {\n      var _careerSelected = listCareer === null || listCareer === void 0 ? void 0 : listCareer.find(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.slug) === queryCareer;\n      });\n\n      setCareerSelected(_careerSelected);\n    } else {\n      setCareerSelected(listCareer[0]);\n    }\n  };\n\n  var setLevelInitial = function setLevelInitial() {\n    if (queryLevel) {\n      var levelSelected = listJobLevel === null || listJobLevel === void 0 ? void 0 : listJobLevel.find(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.slug) === queryLevel;\n      });\n      setJobLevelSelected(levelSelected);\n    } else {\n      setJobLevelSelected(listJobLevel[0]);\n    }\n  };\n\n  var setSalaryInitial = function setSalaryInitial() {\n    if (querySalary) {\n      var salarySelected = listLevelPrice === null || listLevelPrice === void 0 ? void 0 : listLevelPrice.find(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.customSlug) === querySalary;\n      });\n      setLevelPriceSelected(salarySelected);\n    } else {\n      setLevelPriceSelected(listLevelPrice[0]);\n    }\n  };\n\n  var setTypeInitial = function setTypeInitial() {\n    if (queryType) {\n      var typeSelected = listJobType === null || listJobType === void 0 ? void 0 : listJobType.find(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.slug) === queryType;\n      });\n      setJobTypeSelected(typeSelected);\n    } else {\n      setJobTypeSelected(listJobType[0]);\n    }\n  };\n\n  var addOptionToCareers = function addOptionToCareers() {\n    var draftArray = _toConsumableArray(careers);\n\n    unShiftArray(t(\"filter.all-career\"), draftArray);\n    setListCareer(draftArray);\n  };\n\n  var addOptionToJobLevels = function addOptionToJobLevels() {\n    var draftArray = _toConsumableArray(allJobLevel);\n\n    unShiftArray(t(\"filter.all-level\"), draftArray);\n    setListJobLevel(draftArray);\n  };\n\n  var addOptionToLevelPrices = function addOptionToLevelPrices() {\n    var draftArray = _toConsumableArray(allLevelPrice);\n\n    unShiftArray(t(\"filter.all-level-price\"), draftArray);\n    setListLevelPrice(draftArray);\n  };\n\n  var addOptionToJobTypes = function addOptionToJobTypes() {\n    var draftArray = _toConsumableArray(allJobType);\n\n    unShiftArray(t(\"filter.all-type\"), draftArray);\n    setListJobType(draftArray);\n  };\n\n  return /*#__PURE__*/_jsxs(BoxOptionsContainer, {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsx(AutoComplete, {\n      className: \"w-full\",\n      MenuButton: /*#__PURE__*/_jsxs(ListBoxMenu, {\n        className: \"justify-between\",\n        children: [careerSelected === null || careerSelected === void 0 ? void 0 : careerSelected.name, /*#__PURE__*/_jsx(SVG, {\n          name: \"common/arrow-down\",\n          width: \"16\",\n          height: \"16\"\n        })]\n      }),\n      fieldToSearch: [\"name\", \"nameEn\"],\n      onChange: handleSelectedCareer,\n      optionSelected: careerSelected,\n      options: listCareer,\n      renderItem: function renderItem(option) {\n        return /*#__PURE__*/_jsx(ListBoxItem, {\n          children: option === null || option === void 0 ? void 0 : option.name\n        });\n      }\n    }), /*#__PURE__*/_jsx(Select, {\n      optionSelected: jobLevelSelected,\n      onSelect: function onSelect(option) {\n        return handleSelectedJobLevel(option);\n      },\n      options: listJobLevel\n    }), /*#__PURE__*/_jsx(Select, {\n      optionSelected: levelPriceSelected,\n      onSelect: function onSelect(option) {\n        return handleSelectedLevelPrice(option);\n      },\n      options: listLevelPrice\n    }), /*#__PURE__*/_jsx(Select, {\n      optionSelected: jobTypeSelected,\n      onSelect: function onSelect(option) {\n        return handleSelectedJobType(option);\n      },\n      options: listJobType\n    })]\n  });\n};\n\nexport default Filter;\n\nvar removeParams = function removeParams(_query) {\n  var newQuery = _objectSpread({}, _query);\n\n  return newQuery || {};\n};","map":null,"metadata":{},"sourceType":"module"}
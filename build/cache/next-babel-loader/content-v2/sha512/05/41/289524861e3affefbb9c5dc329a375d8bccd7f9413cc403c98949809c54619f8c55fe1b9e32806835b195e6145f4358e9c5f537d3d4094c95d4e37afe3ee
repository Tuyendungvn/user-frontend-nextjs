{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useTranslation } from \"next-i18next\";\nimport { useEffect, useState } from \"react\";\nimport OTPInput from \"@components/OTPInput\";\nimport ErrorHelperText from \"@components/ErrorHelperText\";\nimport { OTPFormContainer, Form, Back, Icon, Title, PhoneValidate, Notification, PhoneNumber, CountDown, Button, Resend } from \"./styles\";\nconst COUNT_DOWN_TIME = 60;\n\nconst OTPForm = props => {\n  const {\n    title,\n    formik,\n    errorMessage,\n    loading = false,\n    onResendOtp,\n    onClose\n  } = props;\n  const {\n    t\n  } = useTranslation([\"authen\"]);\n\n  const handleClick = () => {\n    onClose();\n    formik.setFieldValue(\"otp\", \"\");\n  };\n\n  const {\n    0: countDown,\n    1: setCountDown\n  } = useState(COUNT_DOWN_TIME);\n  const {\n    0: resend,\n    1: setResend\n  } = useState(false);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setCountDown(countDown - 1);\n    }, 1000);\n\n    if (countDown === 0) {\n      setResend(true);\n    }\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [countDown]);\n\n  const handleResend = () => {\n    setResend(false);\n    setCountDown(COUNT_DOWN_TIME);\n    onResendOtp && onResendOtp(formik.values); // formik.setFieldValue(\"otp\", \"\");\n  };\n\n  return /*#__PURE__*/_jsx(OTPFormContainer, {\n    children: /*#__PURE__*/_jsxs(Form, {\n      children: [/*#__PURE__*/_jsxs(Back, {\n        onClick: handleClick,\n        children: [/*#__PURE__*/_jsx(Icon, {\n          name: \"common/navigate-before\",\n          width: 16,\n          height: 17\n        }), t(\"register.back\")]\n      }), /*#__PURE__*/_jsx(Title, {\n        children: title\n      }), /*#__PURE__*/_jsx(PhoneValidate, {\n        children: t(\"register.confirm-phone-number\")\n      }), /*#__PURE__*/_jsxs(Notification, {\n        children: [t(\"register.message\"), /*#__PURE__*/_jsx(PhoneNumber, {\n          children: formik.values.phoneNumber\n        })]\n      }), /*#__PURE__*/_jsx(OTPInput, {\n        value: formik.values.otp,\n        onChange: value => formik.setFieldValue(\"otp\", value),\n        touched: formik.touched.otp,\n        error: formik.errors.otp\n      }), resend ? /*#__PURE__*/_jsxs(Notification, {\n        className: \"mt-2 phone:mt-4\",\n        children: [t(\"register.not-receive-code\"), /*#__PURE__*/_jsx(Resend, {\n          onClick: handleResend,\n          children: t(\"register.resend\")\n        })]\n      }) : /*#__PURE__*/_jsxs(Notification, {\n        className: \"mt-2 phone:mt-4\",\n        children: [t(\"register.please-wait\"), /*#__PURE__*/_jsxs(CountDown, {\n          children: [countDown, \"s\"]\n        }), t(\"register.to-resend-code\")]\n      }), /*#__PURE__*/_jsx(Button, {\n        loading: loading,\n        type: \"submit\",\n        primary: true,\n        children: t(\"register.confirm\")\n      }), errorMessage && /*#__PURE__*/_jsx(ErrorHelperText, {\n        text: errorMessage\n      })]\n    })\n  });\n};\n\nexport default OTPForm;","map":null,"metadata":{},"sourceType":"module"}
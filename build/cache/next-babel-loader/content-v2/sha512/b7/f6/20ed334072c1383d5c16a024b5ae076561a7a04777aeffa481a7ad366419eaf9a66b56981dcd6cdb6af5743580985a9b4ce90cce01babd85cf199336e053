{"ast":null,"code":"import { useCallback, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { PATH } from \"@routes\";\nimport { useRedirect } from \"./useRedirect\";\nimport { getLoggedInAccount, isAuthenticated } from \"@common/utils/auth\";\nimport { removeCurrentUser, setAccountInfo, setIsAuth } from \"@redux/actions/auth\";\n\nvar useAuth = function useAuth() {\n  var dispatch = useDispatch();\n  var redirect = useRedirect();\n\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      isAuth = _useSelector.isAuth,\n      accountInfo = _useSelector.accountInfo;\n\n  useEffect(function () {\n    // to make sure data won't be lacked\n    dispatch(setIsAuth(isAuthenticated()));\n    dispatch(setAccountInfo(getLoggedInAccount()));\n  }, []);\n  var logout = useCallback(function () {\n    dispatch(removeCurrentUser());\n    redirect(PATH.LOGIN, {}, {}, {\n      useRefresh: true\n    });\n  }, []);\n  return {\n    isAuth: isAuth,\n    accountInfo: accountInfo,\n    logout: logout\n  };\n};\n\nexport default useAuth;","map":null,"metadata":{},"sourceType":"module"}
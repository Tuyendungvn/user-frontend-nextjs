{"ast":null,"code":"import _defineProperty from \"/data/source/tuyendungvn-user-frontend-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/data/source/tuyendungvn-user-frontend-nextjs/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/data/source/tuyendungvn-user-frontend-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport { useRedirect } from \"@common/hooks/useRedirect\";\nimport { PATH } from \"@routes\";\nimport SearchBox from \"@components/SearchBox\";\nimport { Container, Wrapper } from \"./styles\";\nimport { getAllCompany } from \"@services/company\";\nimport Link from \"@designs/Link\";\n\nvar SearchWithProvince = function SearchWithProvince(props) {\n  var redirect = useRedirect();\n  var fullQuery = useRouter().query;\n  var query = removeParams(fullQuery);\n  var _query$k = query.k,\n      k = _query$k === void 0 ? \"\" : _query$k;\n\n  var handleSearch = function handleSearch(text, province) {\n    if (text && !province) {\n      redirect(PATH.COMPANY_RESULT, fullQuery, {\n        k: encodeURIComponent(text)\n      });\n    } else if (text === \"\" && province) {\n      redirect(PATH.COMPANY_RESULT, fullQuery, {\n        p: encodeURIComponent(province)\n      });\n    } else if (text && province) {\n      redirect(PATH.COMPANY_RESULT, fullQuery, {\n        k: encodeURIComponent(text),\n        p: encodeURIComponent(province)\n      });\n    } else {\n      redirect(PATH.COMPANY_RESULT, fullQuery);\n    }\n  };\n\n  var fetchAPiSearch = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(searchKeywords) {\n      var payload, response, _ref2, result;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              payload = {\n                keyword: searchKeywords\n              };\n              _context.next = 3;\n              return getAllCompany(payload);\n\n            case 3:\n              response = _context.sent;\n              _ref2 = (response === null || response === void 0 ? void 0 : response.data) || {}, result = _ref2.getCompanies;\n              return _context.abrupt(\"return\", (result === null || result === void 0 ? void 0 : result.results) || []);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchAPiSearch(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var renderDropdownItem = function renderDropdownItem(company) {\n    return /*#__PURE__*/_jsx(Link, {\n      routeName: PATH.COMPANY_DETAIL,\n      params: {\n        slug: company === null || company === void 0 ? void 0 : company.slug\n      },\n      className: \"p-1\",\n      children: company === null || company === void 0 ? void 0 : company.name\n    });\n  };\n\n  var handleSelect = function handleSelect(company) {\n    redirect(PATH.COMPANY_DETAIL, {\n      slug: company === null || company === void 0 ? void 0 : company.slug\n    });\n  };\n\n  return /*#__PURE__*/_jsx(Wrapper, {\n    children: /*#__PURE__*/_jsx(Container, {\n      className: \"container\",\n      children: /*#__PURE__*/_jsx(SearchBox, {\n        onFetchData: fetchAPiSearch,\n        onSubmit: handleSearch,\n        renderDropdownItem: renderDropdownItem,\n        onSelect: handleSelect,\n        value: decodeURIComponent(k)\n      })\n    })\n  });\n};\n\nexport default SearchWithProvince;\n\nvar removeParams = function removeParams(_query) {\n  var newQuery = _objectSpread({}, _query);\n\n  return newQuery || {};\n};","map":null,"metadata":{},"sourceType":"module"}
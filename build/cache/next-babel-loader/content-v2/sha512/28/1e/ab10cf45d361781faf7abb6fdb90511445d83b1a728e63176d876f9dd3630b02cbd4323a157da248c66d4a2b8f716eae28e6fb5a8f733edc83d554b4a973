{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { updateUserProfile } from \"@redux/actions/user\";\nimport Avatar from \"@designs/Avatar\";\nimport ImageCropper from \"@components/ImageCropper\";\nimport { randomId } from \"@common/functions\";\nimport { SVG } from \"@designs/SVG\";\nimport { Container, UploadWrapper, Input, AvatarWrapper, Button, Label } from \"./styles\";\n\nconst AvatarUploader = props => {\n  const {\n    aspect = 1,\n    userId,\n    avatarURL\n  } = props;\n  const {\n    isLoading\n  } = useSelector(state => state.actions);\n  const dispatch = useDispatch();\n  const {\n    0: fileSelected,\n    1: setFileSelected\n  } = useState();\n  const {\n    0: openCropImage,\n    1: setOpenCropImage\n  } = useState(false);\n  const {\n    0: id,\n    1: _\n  } = useState(randomId());\n\n  const handleUploadRawImage = event => {\n    var _event$target;\n\n    const files = event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.files;\n    if (!files) return;\n    const file = files[0];\n    setFileSelected(file);\n    setOpenCropImage(true);\n  };\n\n  const handleCloseImageCropper = () => {\n    setOpenCropImage(false);\n  };\n\n  const handleCroppedImage = file => {\n    const updateUserPayload = {\n      updateUserInput: {\n        urlAvt: file\n      }\n    };\n    dispatch(updateUserProfile(updateUserPayload));\n    handleCloseImageCropper();\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Container, {\n      children: /*#__PURE__*/_jsxs(Label, {\n        htmlFor: id,\n        children: [/*#__PURE__*/_jsx(UploadWrapper, {\n          children: /*#__PURE__*/_jsxs(AvatarWrapper, {\n            children: [/*#__PURE__*/_jsx(Avatar, {\n              href: avatarURL,\n              className: \"w-12 h-12 phone:w-17 phone:h-17\"\n            }), /*#__PURE__*/_jsx(Button, {\n              children: /*#__PURE__*/_jsx(SVG, {\n                name: \"job-management/edit-avatar\",\n                className: \"phone:w-6.5 w-4\"\n              })\n            })]\n          })\n        }), /*#__PURE__*/_jsx(Input, {\n          accept: \"image/*\",\n          id: id,\n          type: \"file\",\n          onChange: handleUploadRawImage\n        })]\n      })\n    }), /*#__PURE__*/_jsx(ImageCropper, {\n      aspect: aspect,\n      image: fileSelected,\n      isOpen: openCropImage,\n      onClose: handleCloseImageCropper,\n      onConfirm: handleCroppedImage,\n      isLoading: isLoading,\n      fileType: (fileSelected === null || fileSelected === void 0 ? void 0 : fileSelected.type) || \"image/png\"\n    })]\n  });\n};\n\nexport default AvatarUploader;","map":null,"metadata":{},"sourceType":"module"}
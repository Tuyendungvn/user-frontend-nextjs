{"ast":null,"code":"import * as services from \"@services/auth\";\nimport { call, put } from \"redux-saga/effects\";\nimport { loginSuccess } from \"@redux/actions/auth\";\nimport { setLoading } from \"@redux/actions/common\";\nimport { showNotification } from \"@components/ToastNotification\";\nexport function* login(payload) {\n  const variables = {\n    user: payload.payload.user\n  };\n  const permission = payload.payload.permission;\n  yield put(setLoading(true));\n  const response = yield call(services.loginWithPhoneNumber, variables);\n  yield put(setLoading(false));\n  const {\n    login: result\n  } = (response === null || response === void 0 ? void 0 : response.data) || {};\n\n  if (!result) {\n    if ((response === null || response === void 0 ? void 0 : response.errors[0].extensions.exception.status) === 400) {\n      if ((response === null || response === void 0 ? void 0 : response.errors[0].extensions.exception.message) === \"Your account is not verified otp\") {\n        showNotification({\n          type: \"error\",\n          title: \"Thông báo\",\n          message: \"Tài khoản của bạn chưa được xác thực. Vui lòng nhập lại mã OTP để xác thực tài khoản !\"\n        });\n        eventManager.fire(\"activeAccount\");\n      }\n\n      if ((response === null || response === void 0 ? void 0 : response.errors[0].extensions.exception.message) === \"Error.login phoneNumber or email or password incorrect !\") {\n        showNotification({\n          type: \"error\",\n          title: \"Thông báo\",\n          message: \"Sai số điện thoại hoặc mật khẩu !\"\n        });\n      }\n    }\n\n    if ((response === null || response === void 0 ? void 0 : response.errors[0].extensions.exception.status) === 404) {\n      showNotification({\n        type: \"error\",\n        title: \"Thông báo\",\n        message: \"Số điện thoại của bạn chưa được đăng ký !\"\n      });\n    }\n  }\n\n  if (result) {\n    if (permission === result.userInfo.permission) {\n      showNotification({\n        type: \"success\",\n        title: \"Thông báo\",\n        message: \"Đăng nhập thành công!\"\n      });\n      yield put(loginSuccess(result));\n    } else {\n      showNotification({\n        type: \"error\",\n        title: \"Thông báo\",\n        message: \"Tài khoản không phải là tài khoản người dùng !\"\n      });\n    }\n  }\n} // New Login with OTP Voice","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { Transition, Listbox } from \"@headlessui/react\";\nimport Fuse from \"fuse.js\";\nimport { Input, InputWrapper, ListboxButton, ListboxOptions, ListOptions, Button } from \"./styles\";\nimport { SVG } from \"@designs/SVG\";\n\nconst ListBox = props => {\n  const {\n    innerClassName = \"\",\n    className = \"\",\n    MenuButton,\n    optionSelected,\n    fieldToSearch = [\"name\"],\n    options,\n    renderItem,\n    onChange,\n    disabled = false\n  } = props;\n  const {\n    0: value,\n    1: setValue\n  } = useState(\"\");\n  const {\n    0: listData,\n    1: setListData\n  } = useState([]);\n  useEffect(() => {\n    if (options.length > 0) {\n      setListData(options || []);\n    }\n  }, [options]);\n  useEffect(() => {\n    if (value) {\n      handleSearch(value);\n    }\n  }, [value]);\n\n  const handleSearch = value => {\n    const fuseOptions = {\n      includeScore: true,\n      keys: fieldToSearch\n    };\n    const fuse = new Fuse(options, fuseOptions);\n    const searchResult = value && fuse.search(value).map(option => option.item).filter(option => option.name !== (optionSelected === null || optionSelected === void 0 ? void 0 : optionSelected.name));\n    setListData(searchResult || []);\n  };\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  const onChangeSelected = value => {\n    setValue(\"\");\n    onChange && onChange(value);\n    setListData(options || []);\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: className,\n    children: /*#__PURE__*/_jsx(Listbox, {\n      value: optionSelected,\n      onChange: onChangeSelected,\n      disabled: disabled,\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: `relative ${innerClassName} ${disabled && \"opacity-60\"}`,\n        children: [/*#__PURE__*/_jsx(ListboxButton, {\n          children: MenuButton\n        }), /*#__PURE__*/_jsx(Transition, {\n          as: Fragment,\n          leave: \"transition ease-in duration-100\",\n          leaveFrom: \"opacity-100\",\n          leaveTo: \"opacity-0\",\n          children: /*#__PURE__*/_jsxs(ListboxOptions, {\n            children: [/*#__PURE__*/_jsxs(InputWrapper, {\n              children: [/*#__PURE__*/_jsx(SVG, {\n                name: \"common/search\",\n                width: \"24\",\n                height: \"24\",\n                className: \"block absolute top-1.2 left-3.5\"\n              }), /*#__PURE__*/_jsx(Input, {\n                autoComplete: \"off\",\n                value: value,\n                name: \"name\",\n                onChange: handleChange,\n                onKeyDown: e => {\n                  if (![\"Enter\", \"Esc\", \"Home\", \"End\", \"ArrowUp\", \"ArrowDown\"].includes(e.key)) {\n                    e.stopPropagation();\n                  }\n                }\n              })]\n            }), /*#__PURE__*/_jsx(ListOptions, {\n              children: listData.map((option, index) => /*#__PURE__*/_jsx(Listbox.Option, {\n                value: option,\n                className: \"px-1\",\n                children: ({\n                  selected,\n                  active\n                }) => /*#__PURE__*/_jsx(Button, {\n                  active: active,\n                  selected: selected,\n                  children: renderItem(option, selected, active)\n                })\n              }, `dropdown-i-${index}-${option === null || option === void 0 ? void 0 : option.name}`))\n            })]\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default ListBox;","map":null,"metadata":{},"sourceType":"module"}
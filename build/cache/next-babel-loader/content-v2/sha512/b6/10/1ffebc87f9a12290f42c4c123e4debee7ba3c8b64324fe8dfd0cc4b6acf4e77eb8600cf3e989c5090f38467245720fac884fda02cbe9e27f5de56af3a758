{"ast":null,"code":"import jwtDecode from \"jwt-decode\";\nimport Cookies from \"universal-cookie\";\nconst cookies = new Cookies();\nexport const cookieKey = \"TUYENDUNGVN_USER_KEY\";\nexport const getUserCookies = () => {\n  return cookies.get(cookieKey);\n};\n/**\n * Returns the logged in user\n */\n\nexport const getLoggedInAccount = () => {\n  const account = getUserCookies();\n  return account ? typeof account === \"object\" ? account : JSON.parse(account) : null;\n};\nexport const getToken = () => {\n  var _getUserCookies, _getUserCookies2;\n\n  return ((_getUserCookies = getUserCookies()) === null || _getUserCookies === void 0 ? void 0 : _getUserCookies.token) || ((_getUserCookies2 = getUserCookies()) === null || _getUserCookies2 === void 0 ? void 0 : _getUserCookies2.accessToken) || \"\";\n};\nexport const removeUserCookies = () => {\n  cookies.remove(cookieKey, {\n    path: \"/\"\n  });\n};\n/**\n * Checks if user is authenticated\n */\n\nexport const isAuthenticated = () => {\n  const user = getLoggedInAccount();\n\n  if (!user) {\n    return false;\n  }\n\n  try {\n    const decoded = jwtDecode((user === null || user === void 0 ? void 0 : user.token) || (user === null || user === void 0 ? void 0 : user.accessToken) || \"\");\n    if (!decoded) return false;\n    return true;\n  } catch (error) {\n    console.error(error);\n    return false;\n  }\n};\nexport const setUserCookies = data => {\n  const decodedToken = jwtDecode((data === null || data === void 0 ? void 0 : data.token) || (data === null || data === void 0 ? void 0 : data.accessToken) || \"\");\n  const {\n    exp\n  } = decodedToken || {};\n  const timeNow = new Date().getTime();\n  const shortExp = timeNow + 5 * 3600 * 1000; // 5 hours\n\n  const expires = exp ? new Date(exp * 1000) : new Date(shortExp);\n  cookies.set(cookieKey, data, {\n    path: \"/\",\n    expires\n  });\n};","map":null,"metadata":{},"sourceType":"module"}
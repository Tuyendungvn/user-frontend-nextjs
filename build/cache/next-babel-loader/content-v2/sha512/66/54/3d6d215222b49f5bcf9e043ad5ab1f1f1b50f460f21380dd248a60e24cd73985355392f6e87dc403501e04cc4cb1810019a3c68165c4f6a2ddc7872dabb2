{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from \"react\";\nimport RelatedJobCard from \"@designs/Card/RelatedJobCard\";\nimport { Link, ListCardContainer, RelateJobContainer, Title, LinkWrapper } from \"./styles\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getAllRecruitment } from \"@redux/actions/recruitment\";\nimport useAuth from \"@common/hooks/useAuth\";\nimport { setSeenRecruitment } from \"@redux/actions/recruitment\";\nimport { PATH } from \"@routes\";\n\nvar RelatedJob = function RelatedJob(_ref) {\n  var _accountInfo$userInfo;\n\n  var recruitment = _ref.recruitment,\n      title = _ref.title,\n      bestRecruitment = _ref.bestRecruitment;\n  var dispatch = useDispatch();\n\n  var _useAuth = useAuth(),\n      accountInfo = _useAuth.accountInfo;\n\n  var userId = accountInfo === null || accountInfo === void 0 ? void 0 : (_accountInfo$userInfo = accountInfo.userInfo) === null || _accountInfo$userInfo === void 0 ? void 0 : _accountInfo$userInfo._id;\n\n  var _useState = useState([]),\n      newBestRecruitment = _useState[0],\n      setNewBestRecruitment = _useState[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.recruitment;\n  }),\n      allRecruitment = _useSelector.allRecruitment.results;\n\n  useEffect(function () {\n    sliceBestRecruitment();\n  }, [bestRecruitment]);\n  useEffect(function () {\n    if (recruitment) {\n      var _recruitment$company;\n\n      getRelatedRecruitmentAPI((_recruitment$company = recruitment.company) === null || _recruitment$company === void 0 ? void 0 : _recruitment$company.code);\n    }\n  }, [recruitment]);\n\n  var getRelatedRecruitmentAPI = function getRelatedRecruitmentAPI(code) {\n    var payload = {\n      filterRecruitment: {\n        companyCode: code || \"\"\n      },\n      page: 0,\n      size: 6\n    };\n    dispatch(getAllRecruitment(payload));\n  };\n\n  var sliceBestRecruitment = function sliceBestRecruitment() {\n    var newArray = [];\n\n    if ((bestRecruitment === null || bestRecruitment === void 0 ? void 0 : bestRecruitment.length) >= 6) {\n      newArray = bestRecruitment === null || bestRecruitment === void 0 ? void 0 : bestRecruitment.slice(0, 6);\n    } else {\n      newArray = bestRecruitment;\n    }\n\n    setNewBestRecruitment(newArray);\n  };\n\n  var handleClickJob = function handleClickJob(recruitmentId) {\n    dispatch(setSeenRecruitment({\n      userId: userId,\n      recruitmentId: recruitmentId\n    }));\n  };\n\n  return /*#__PURE__*/_jsxs(RelateJobContainer, {\n    children: [/*#__PURE__*/_jsx(Title, {\n      children: title\n    }), /*#__PURE__*/_jsx(ListCardContainer, {\n      children: bestRecruitment ? newBestRecruitment === null || newBestRecruitment === void 0 ? void 0 : newBestRecruitment.map(function (job, index) {\n        return /*#__PURE__*/_jsx(LinkWrapper, {\n          onClick: function onClick() {\n            return handleClickJob(job === null || job === void 0 ? void 0 : job._id);\n          },\n          children: /*#__PURE__*/_jsx(Link, {\n            routeName: PATH.JOB_DETAIL,\n            params: {\n              slug: job === null || job === void 0 ? void 0 : job.slug\n            },\n            children: /*#__PURE__*/_jsx(RelatedJobCard, {\n              job: job\n            })\n          }, index)\n        });\n      }) : allRecruitment && (allRecruitment === null || allRecruitment === void 0 ? void 0 : allRecruitment.map(function (job, index) {\n        return /*#__PURE__*/_jsx(LinkWrapper, {\n          onClick: function onClick() {\n            return handleClickJob(job === null || job === void 0 ? void 0 : job._id);\n          },\n          children: /*#__PURE__*/_jsx(Link, {\n            routeName: PATH.JOB_DETAIL,\n            params: {\n              slug: job === null || job === void 0 ? void 0 : job.slug\n            },\n            children: /*#__PURE__*/_jsx(RelatedJobCard, {\n              job: job\n            })\n          }, index)\n        });\n      }))\n    })]\n  });\n};\n\nexport default RelatedJob;","map":null,"metadata":{},"sourceType":"module"}
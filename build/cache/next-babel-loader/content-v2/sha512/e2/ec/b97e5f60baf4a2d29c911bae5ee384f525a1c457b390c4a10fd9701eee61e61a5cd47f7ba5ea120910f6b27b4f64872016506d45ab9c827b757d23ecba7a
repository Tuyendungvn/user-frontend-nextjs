{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/data/source/tuyendungvn-user-frontend-nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { PATH } from \"@routes\";\nimport { cleanObject, formatParams } from \"@common/functions\";\nimport { useRedirect } from \"@common/hooks/useRedirect\";\nimport { getAllRecruitment } from \"@redux/actions/recruitment\";\nimport Sort from \"./components/Sort\";\nimport Pagination from \"@components/Pagination\";\nimport ErrorBoundary from \"@components/ErrorBoundary\";\nimport Filter from \"@components/Filter\";\nimport Search from \"@components/SearchWithProvince\";\nimport JobCard from \"@designs/Card/JobCard\";\nimport NotFoundAlert from \"@designs/NotFoundAlert\";\nimport SlickSlider from \"@designs/SlickSlider\";\nimport { AdsContainer, Content, ListCards, ListCardsContainer, JobContainer, JobWrapper, SearchResultContainer, Ads } from \"./styles\";\nvar SIZE_PER_PAGE = 12;\nvar MOBILE_SCREEN = 1023;\n\nvar Job = function Job(props) {\n  var _useState = useState(0),\n      currentWidth = _useState[0],\n      setCurentWidth = _useState[1];\n\n  var dispatch = useDispatch();\n  var redirect = useRedirect();\n  var fullQuery = useRouter().query;\n  var _career = fullQuery.career,\n      _level = fullQuery.level,\n      _salary = fullQuery.salary,\n      _type = fullQuery.type,\n      _province = fullQuery.province,\n      _keywords = fullQuery.k,\n      _fullQuery$page = fullQuery.page,\n      page = _fullQuery$page === void 0 ? 1 : _fullQuery$page;\n  var career = formatParams(decodeURIComponent(_career || \"\"));\n  var level = formatParams(decodeURIComponent(_level || \"\"));\n  var salary = formatParams(decodeURIComponent(_salary || \"\"));\n  var type = formatParams(decodeURIComponent(_type || \"\"));\n  var province = formatParams(decodeURIComponent(_province || \"\"));\n  var keywords = formatParams(decodeURIComponent(_keywords || \"\"));\n\n  var _useSelector = useSelector(function (state) {\n    return state.recruitment;\n  }),\n      _useSelector$allRecru = _useSelector.allRecruitment,\n      _useSelector$allRecru2 = _useSelector$allRecru.results,\n      allJob = _useSelector$allRecru2 === void 0 ? [] : _useSelector$allRecru2,\n      _useSelector$allRecru3 = _useSelector$allRecru.totalCount,\n      totalCount = _useSelector$allRecru3 === void 0 ? 0 : _useSelector$allRecru3,\n      loading = _useSelector$allRecru.loading;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.recruitment;\n  }),\n      sortTypeSelected = _useSelector2.sortTypeSelected;\n\n  useEffect(function () {\n    getAllJobAPI();\n  }, [fullQuery, sortTypeSelected]);\n\n  var handleWindowResize = function handleWindowResize() {\n    setCurentWidth(window.innerWidth);\n  };\n\n  useEffect(function () {\n    handleWindowResize();\n    window.addEventListener(\"resize\", handleWindowResize);\n    return function () {\n      return window.removeEventListener(\"resize\", handleWindowResize);\n    };\n  }, [currentWidth]);\n\n  var getAllJobAPI = function getAllJobAPI() {\n    var payload = {\n      keyword: keywords,\n      filterRecruitment: {\n        slugCareer: career,\n        slugLevel: level,\n        slugLevelPrice: salary,\n        slugType: type,\n        slugProvince: province,\n        sortType: (sortTypeSelected === null || sortTypeSelected === void 0 ? void 0 : sortTypeSelected.value) || \"latest\"\n      },\n      page: Number(page) - 1,\n      size: SIZE_PER_PAGE\n    };\n    dispatch(getAllRecruitment(cleanObject(payload)));\n  };\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.ads;\n  }),\n      listAdsJobPage = _useSelector3.listAdsJobPage;\n\n  var handlePageChange = function handlePageChange(newPage) {\n    redirect(PATH.JOB, fullQuery, _objectSpread(_objectSpread({}, fullQuery), {}, {\n      page: newPage + 1\n    }));\n  };\n\n  var custom = {\n    dots: true,\n    infinite: true,\n    slidesToScroll: 1,\n    autoplay: true,\n    speed: 500,\n    slidesPerRow: 1,\n    rows: 1,\n    appendDots: function appendDots(dots) {\n      return /*#__PURE__*/_jsx(\"ul\", {\n        children: dots\n      });\n    },\n    customPaging: function customPaging(i) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: \"ft-slick__dots--custom\"\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxs(JobWrapper, {\n    children: [/*#__PURE__*/_jsx(Search, {}), /*#__PURE__*/_jsxs(JobContainer, {\n      children: [/*#__PURE__*/_jsx(Filter, {}), /*#__PURE__*/_jsxs(Content, {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxs(SearchResultContainer, {\n          children: [/*#__PURE__*/_jsx(Sort, {\n            totalCount: totalCount\n          }), /*#__PURE__*/_jsxs(ListCardsContainer, {\n            children: [(!loading && !totalCount || totalCount == 0) && /*#__PURE__*/_jsx(NotFoundAlert, {}), /*#__PURE__*/_jsx(ErrorBoundary, {\n              children: /*#__PURE__*/_jsx(ListCards, {\n                children: allJob === null || allJob === void 0 ? void 0 : allJob.map(function (job, index) {\n                  return /*#__PURE__*/_jsx(JobCard, {\n                    job: job\n                  }, index);\n                })\n              })\n            })]\n          }), totalCount > 0 && /*#__PURE__*/_jsx(Pagination, {\n            page: Number(page) - 1,\n            sizePerPage: SIZE_PER_PAGE,\n            totalSize: totalCount,\n            onPageChange: handlePageChange,\n            className: \"flex justify-center mt-4 laptop:justify-start\"\n          })]\n        }), currentWidth <= MOBILE_SCREEN ? /*#__PURE__*/_jsx(AdsContainer, {\n          children: /*#__PURE__*/_jsx(SlickSlider, {\n            custom: custom,\n            className: \"slider-layout\",\n            children: listAdsJobPage.map(function (ad, index) {\n              var _ad$, _ad$2;\n\n              return /*#__PURE__*/_jsx(\"a\", {\n                href: (_ad$ = ad[0]) === null || _ad$ === void 0 ? void 0 : _ad$.link,\n                children: /*#__PURE__*/_jsx(Ads, {\n                  className: \"mb-2\",\n                  dangerouslySetInnerHTML: {\n                    __html: (_ad$2 = ad[0]) === null || _ad$2 === void 0 ? void 0 : _ad$2.code\n                  }\n                }, index)\n              });\n            })\n          })\n        }) : /*#__PURE__*/_jsx(AdsContainer, {\n          children: listAdsJobPage.map(function (ad, index) {\n            var _ad$3, _ad$4;\n\n            return /*#__PURE__*/_jsx(\"a\", {\n              href: (_ad$3 = ad[0]) === null || _ad$3 === void 0 ? void 0 : _ad$3.link,\n              children: /*#__PURE__*/_jsx(Ads, {\n                className: \"mb-2\",\n                dangerouslySetInnerHTML: {\n                  __html: (_ad$4 = ad[0]) === null || _ad$4 === void 0 ? void 0 : _ad$4.code\n                }\n              }, index)\n            });\n          })\n        })]\n      })]\n    })]\n  });\n};\n\nexport default Job;\n\nvar removeParams = function removeParams(_query) {\n  var newQuery = _objectSpread({}, _query);\n\n  delete newQuery.career;\n  delete newQuery.level;\n  delete newQuery.salary;\n  delete newQuery.type;\n  delete newQuery.province;\n  return newQuery || {};\n};\n\nfunction componentWillMount() {\n  throw new Error(\"Function not implemented.\");\n}","map":null,"metadata":{},"sourceType":"module"}